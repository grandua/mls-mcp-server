{
  "build": {
    "builder": "DOCKERFILE",
    "dockerfilePath": "Dockerfile"
  },
  "deploy": {
    "startCommand": "sh -c 'flowise start & node /app/dist/server.js'",
    "ports": [
      {
        "port": 3000,
        "protocol": "TCP",
        "public": true,
        "http": {
          "routes": [
            { "handle": "api" },
            { "handle": "filesystem" }
          ]
        }
      }
    ],
    "healthChecks": {
      "flowise": "curl -f http://localhost:3000 || exit 1",
      "mcp": "curl -f http://localhost:3001 || exit 1"
    }
  },
  "env": {
    "FLOWISE_PORT": "3000",
    "APIKEY_PATH": "/app/Flowise/encryption.key" 
  }
}